{% load static %}
<aside class="w-64 h-screen bg-gradient-to-b from-white via-gray-50 to-gray-100 shadow-xl border-r border-gray-200 fixed top-0 left-0 z-30 flex flex-col p-6 overflow-y-auto">
  <!-- Logo / Title -->
  <div class="mb-8">
    <h2 class="text-2xl font-bold text-blue-700 tracking-wide flex items-center gap-2 select-none">
      <span class="text-3xl">📋</span> Menu
    </h2>
  </div>

<ul class="space-y-2 text-gray-700 text-base font-medium flex-1">
  {% if request.user.is_authenticated %}
    {% if request.user.role == 'admin' or request.user.is_superuser %}
      <li>
        <a href="{% url 'admin_dashboard' %}" class="sidebar-link {% if request.path == '/admin/' %}active{% endif %}">🏠 Dashboard</a>
      </li>
      <li>
        <a href="{% url 'admin_dashboard:manage_users' %}" class="sidebar-link {% if 'manage-users' in request.path %}active{% endif %}">👥 Manage Users</a>
      </li>
<li class="relative group">
  <a href="#" class="sidebar-link flex items-center justify-between">
    🥛 Milk Overview
    <svg class="w-4 h-4 ml-1 transform group-hover:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  </a>
  <ul class="hidden group-hover:block bg-white shadow rounded absolute left-0 top-full mt-1 min-w-[180px] z-10">
    <li>
      <a href="{% url 'admin_dashboard:milk_overview' %}" class="block px-4 py-2 hover:bg-gray-100">📊 Overview</a>
    </li>
    <li>
      <a href="{% url 'admin_dashboard:farmer_summary' %}" class="block px-4 py-2 hover:bg-gray-100">🔍 Farmer Summary</a>
    </li>
  </ul>
</li>

<!-- Sidebar Section: Payment -->
<li class="ml-4">
  <button
    class="sidebar-link flex items-center justify-between w-full text-left focus:outline-none"
    onclick="document.getElementById('payment-submenu').classList.toggle('hidden')"
  >
    💸 Payments
    <svg class="w-4 h-4 ml-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 9l-7 7-7-7" />
    </svg>
  </button>
  <ul id="payment-submenu" class="ml-4 mt-2 hidden text-sm">
    <li class="mt-1">
      <a href="{% url 'admin_dashboard:record_payment' %}" class="block text-gray-600 hover:text-green-600">➕ Record Payment</a>
    </li>
    <li class="mt-1">
      <a href="{% url 'admin_dashboard:collector_list' %}" class="block text-gray-600 hover:text-green-600">👷 Collectors' Payments</a>
    </li>
    <li class="mt-1">
      <a href="{% url 'admin_dashboard:farmer_list' %}" class="block text-gray-600 hover:text-green-600">🌾 Farmers' Payments</a>
    </li>
    <li class="mt-1">
      <a href="{% url 'admin_dashboard:rate_settings' %}" class="block text-gray-600 hover:text-green-600">⚙️ Rate Settings</a>
    </li>
  </ul>
</li>




      <li><a href="#" class="sidebar-link">📦 Inventory</a></li>
      <li><a href="#" class="sidebar-link">📊 Analytics</a></li>
      <li><a href="#" class="sidebar-link">📨 Messages</a></li>
      <li>
        <a href="{% url 'profile' %}" class="sidebar-link {% if request.path == '/profile/' %}active{% endif %}">👤 Profile</a>
      </li>

      {% elif request.user.role == 'collector' %}
        <li><a href="#" class="sidebar-link">🏠 Dashboard</a></li>
        <li><a href="#" class="sidebar-link">📋 Submit Milk Records</a></li>
        <li><a href="#" class="sidebar-link">👨‍🌾 Farmers List</a></li>
        <li><a href="#" class="sidebar-link">📊 Collection History</a></li>
        <li><a href="{% url 'profile' %}" class="sidebar-link {% if request.path == '/profile/' %}active{% endif %}">👤 Profile</a></li>

      {% elif request.user.role == 'farmer' %}
        <li><a href="#" class="sidebar-link">🏠 Dashboard</a></li>
        <li><a href="#" class="sidebar-link">🥛 My Milk Records</a></li>
        <li><a href="#" class="sidebar-link">🛒 Order Supplements</a></li>
        <li><a href="#" class="sidebar-link">💰 Payment Status</a></li>
        <li><a href="#" class="sidebar-link">📬 Notifications</a></li>
        <li><a href="#" class="sidebar-link">✉️ Feedback</a></li>
        <li><a href="{% url 'profile' %}" class="sidebar-link {% if request.path == '/profile/' %}active{% endif %}">👤 Profile</a></li>
      {% endif %}

    {% endif %}
  </ul>

  <!-- Footer -->
  <div class="text-xs text-gray-400 text-center pt-4 mt-8 border-t border-gray-200 select-none">
    © {{ now.year }} Smart Dairy System
  </div>
</aside>
