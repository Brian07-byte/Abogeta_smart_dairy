{% extends 'auths/base_dashboard.html' %}

{% block content %}
<h2 class="text-xl font-bold mb-4">Milk Collection Summary</h2>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
  <div class="bg-green-100 p-4 rounded">
    <strong>Total Milk Collected:</strong>
    <p>{{ total_quantity }} L</p>
  </div>
  <div class="bg-blue-100 p-4 rounded">
    <strong>Total Payable to Farmers:</strong>
    <p>KES {{ total_farmers_payment }}</p>
  </div>
  <div class="bg-yellow-100 p-4 rounded">
    <strong>Total Collector Commission:</strong>
    <p>KES {{ total_collector_commission }}</p>
  </div>
  <div class="bg-gray-100 p-4 rounded">
    <strong>Milk Collected Today ({{ today }}):</strong>
    <p>{{ daily_total }} L</p>
  </div>
</div>

<h3 class="text-lg font-semibold mt-6 mb-2">By Farmer</h3>
<table class="table-auto w-full text-sm mb-6">
  <thead>
    <tr class="bg-gray-200">
      <th class="px-4 py-2">Farmer</th>
      <th class="px-4 py-2">Total Milk (L)</th>
      <th class="px-4 py-2">Total Payment</th>
    </tr>
  </thead>
  <tbody>
    {% for f in farmer_summary %}
    <tr class="border-b">
      <td class="px-4 py-2">{{ f.farmer_username }}</td>
      <td class="px-4 py-2">{{ f.total_milk }}</td>
      <td class="px-4 py-2">KES {{ f.total_payment }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="3" class="text-center py-2">No records.</td></tr>
    {% endfor %}
  </tbody>
</table>

<h3 class="text-lg font-semibold mb-2">By Collector</h3>
<table class="table-auto w-full text-sm">
  <thead>
    <tr class="bg-gray-200">
      <th class="px-4 py-2">Collector</th>
      <th class="px-4 py-2">Total Milk (L)</th>
      <th class="px-4 py-2">Total Commission</th>
    </tr>
  </thead>
  <tbody>
    {% for c in collector_summary %}
    <tr class="border-b">
      <td class="px-4 py-2">{{ c.collector_username }}</td>
      <td class="px-4 py-2">{{ c.total_milk }}</td>
      <td class="px-4 py-2">KES {{ c.total_commission }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="3" class="text-center py-2">No records.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
